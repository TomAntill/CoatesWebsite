<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/img//apple-icon.png">
    <link rel="icon" type="image/png" href="./assets/img//favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Add Picture
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <!-- CSS Files -->
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./assets/css/paper-kit.css?v=2.2.0" rel="stylesheet" />
</head>
<style>
  .failedUpload {
      border-top: 1px solid #999999;
      /* position: fixed; */
      z-index: 10000;
      text-align: center;
      bottom: -100px;
      font-size: 18px;
      background-color: #f75676;
      display: none;
      /* display: flex; */
      justify-content: center;
      border-top-left-radius: 25px;
      border-top-right-radius: 25px;
      right: 0;
      left: 0;
      margin-right: auto;
      margin-left: auto;
      color: white;
      padding-top: 10px;
      border-bottom-left-radius: 25px;
      border-bottom-right-radius: 25px;
      vertical-align: middle;
      width: 50%;
  }
</style>

<body>
    <div id="loadingContent"> Loading...</div>
    <div id="pageContent" style="display: none;">

    <h2>Upload Image</h2>

    <style>
          #uploadForm {
    width: 500px;
    max-width: 100%;
    margin-left: 10px;
    margin-top: 10px;
  }
        .form-group {
          display: flex;
          flex-direction: row;
          align-items: center;
          margin-bottom: 10px;
        }
      
        .form-group label {
          flex: 1;
          margin-right: 10px;
        }
      
        .form-group input[type="text"],
        .form-group input[type="file"] {
          flex: 2;
        }

      /* Media query for screens smaller than 500 pixels */
  @media (max-width: 500px) {
    #uploadForm {
      width: 100%;
    }

    .form-group {
      flex-direction: column;
      align-items: flex-start;
    }

    .form-group label {
      margin-right: 0;
      margin-bottom: 5px;
    }

    .form-group input[type="text"],
    .form-group input[type="file"] {
      flex: 1;
    }
  }
      </style>
      
      <form id="uploadForm" enctype="multipart/form-data">
        <div class="form-group">
          <label for="name">Name:</label>
          <input type="text" id="name" name="name" required>
        </div>
      
        <div class="form-group">
          <label for="file">Image File:</label>
          <input type="file" id="file" name="file" accept=".jpg, .jpeg, .png" required>
        </div>
      
        <div class="form-group">
            <label for="uploadCategory">Upload Category:</label>
            <select id="uploadCategory" name="uploadCategory" required>
              <option value="BespokeCarpentry">Bespoke Carpentry</option>
              <option value="ConcreteTops">Concrete Tops</option>
              <option value="Furniture">Furniture</option>
              <option value="None">None</option>
            </select>
          </div>
        
          <div class="form-group">
            <label for="projectName">Project Name:</label>
            <select id="projectName" name="projectName" required>
              <option value="TregonwellRoad">Tregonwell Road</option>
              <option value="PonsfordRoad">Ponsford Road</option>
              <option value="Summerhouse">Summerhouse</option>
              <option value="None">None</option>
            </select>
          </div>
      
        <div class="form-group">
          <button type="submit">Upload Image</button>
        </div>
      </form>
      
            </div>
            <div>
                <a href="/Images.html">Back to List</a>
              </div>

              <div class="alert alert-danger failedUpload" id="messagebox" role="alert" style="display: none;"></div>


    <script>
      // Your JavaScript function 'addImage()' goes here.
      async function addImage(name, file, websiteName, uploadCategory, projectName) {
        // Implement the function to make the API call and handle the response.
      }
      // Handle form submission
      document.getElementById('uploadForm').addEventListener('submit', async (event) => {
        event.preventDefault();
  
        const name = document.getElementById('name').value;
        const file = document.getElementById('file').files[0];
        const websiteName = "CoatesCarpentry";
        const uploadCategory = document.getElementById('uploadCategory').value;
        const projectName = document.getElementById('projectName').value;
        try {
          await addImage(name, file, websiteName, uploadCategory, projectName);
          // Optionally, you can show a success message or perform any other action upon successful API call.
        } catch (error) {
          console.error('Error:', error);
          // Optionally, you can show an error message or perform any other action if there's an error.
          // Store the failure message in localStorage
          localStorage.setItem("failureMessage", "Upload failed. Please check your credentials.");

          // Display the failure message
          const messagebox = document.getElementById("messagebox");
          messagebox.innerText = "Upload failed.";
          messagebox.style.display = "block";

          // Call the fadeMyDiv function after 3 seconds
          setTimeout(fadeMyDiv, 3000);
        }

      });
      function fadeMyDiv() {
        $("#messagebox").fadeOut('slow');
        localStorage.removeItem("failureMessage");
    }
    </script>

    <!--   Core JS Files   -->
    <script src="./assets/js/back-end-services.js"></script>
    <script>
        isLoggedIn();
    </script>
    <script src="./assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="./assets/js/core/bootstrap.min.js" type="text/javascript"></script>
    <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
    <script src="./assets/js/plugins/bootstrap-switch.js"></script>
    <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="./assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
    <!--  Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker -->
    <script src="./assets/js/plugins/moment.min.js"></script>
    <script src="./assets/js/plugins/bootstrap-datepicker.js" type="text/javascript"></script>
    <!-- Control Center for Paper Kit: parallax effects, scripts for the example pages etc -->
    <script src="./assets/js/paper-kit.js?v=2.2.0" type="text/javascript"></script>
    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</body>
</html>