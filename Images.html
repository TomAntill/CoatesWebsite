<!DOCTYPE html>

<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="./assets/img//apple-icon.png">
    <link rel="icon" type="image/png" href="./assets/img//favicon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Admin
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <!-- CSS Files -->
    <link href="./assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="./assets/css/paper-kit.css?v=2.2.0" rel="stylesheet" />
</head>
<body>
    <h1 style="margin-left:8px">Admin</h1>
    <br />
    <p>
        <a onclick="window.location.replace('http://127.0.0.1:8080/Add');" style="font-weight: 700; margin-left: 8px;">Create New</a>
    </p>
    <table class="table">
        <thead>
          <tr>
            <th></th>
            <th>Name</th>
            <th>Picture Category</th>
            <th>Project Name</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <!-- This is where the rows will be populated -->
        </tbody>
      </table>
    <!--   Core JS Files   -->
    <script src="./assets/js/back-end-services.js"></script>
    <script src="./assets/js/types.js"></script>
    <script>
        isLoggedIn();
    </script>
    <script>
        const tbody = document.querySelector('tbody');
        
        sendGetRequest('0', undefined, undefined)
            .then(images => {
                images.forEach(image => {
                    image.projectName = ProjectNameEnum(image.projectName);
                    image.pictureCategory = UploadCategoryEnum(image.pictureCategory);
                    console.log(image.id);
                    const row = document.createElement('tr'); // Create a new row for each image
                    row.innerHTML = `
                        <td><img src="${image.url}" alt="Image" id="imageElement" style="max-width: 200px; margin-top: 30px; margin-bottom: 30px;">
                        <td>${image.name}</td>
                        <td>${image.pictureCategory}</td>
                        <td>${image.projectName}</td>
                        <td>
                            <a href="http://127.0.0.1:8080/Edit?Id=${image.id}">Edit</a> |
                            <a href="http://127.0.0.1:8080/Details?Id=${image.id}">Details</a> |
                            <a href="http://127.0.0.1:8080/Delete?Id=${image.id}">Delete</a> |
                        </td>
                        `;
                        tbody.appendChild(row); // Append the row to the table body
                    });
                })
            .catch(error => {
            // Handle errors
            console.error(error);
        });

        function UploadCategoryEnum(pictureCategory){
            if (pictureCategory==0)
                return "Bespoke Carpentry";
            if (pictureCategory==1)
                return "Concrete Tops";
            if (pictureCategory==2)
                return "Furniture";
            if (pictureCategory==3)
                return "None";
        }

        function ProjectNameEnum(projectName){
            if (projectName==0)
                return "Tregonwell Road";
            if (projectName==1)
                return "Ponsford Road";
            if (projectName==2)
                return "Summerhouse";
            if (projectName==3)
                return "None";
        }
</script>
    <script src="./assets/js/core/jquery.min.js" type="text/javascript"></script>
    <script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
    <script src="./assets/js/core/bootstrap.min.js" type="text/javascript"></script>
    <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
    <script src="./assets/js/plugins/bootstrap-switch.js"></script>
    <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
    <script src="./assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
    <!--  Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker -->
    <script src="./assets/js/plugins/moment.min.js"></script>
    <script src="./assets/js/plugins/bootstrap-datepicker.js" type="text/javascript"></script>
    <!-- Control Center for Paper Kit: parallax effects, scripts for the example pages etc -->
    <script src="./assets/js/paper-kit.js?v=2.2.0" type="text/javascript"></script>
    <!--  Google Maps Plugin    -->
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
</body>
</html>
